import{r as l,G as W,R as e,P as F,T as n,B as N,a as j,b as T,S as k,c as D}from"./index-0bafab06.js";import{C as I}from"./category-feed-page-399284b7.js";import{T as R}from"./TextField-0e1e8ea4.js";import{C as x,a as C}from"./posts-component-88a8037a.js";import"./skeletons-component-d1d86919.js";import"./featured-post-component-65e7e2b0.js";import"./Select-5d32744b.js";import"./useFormControl-1bfac1b8.js";import"./MenuItem-60b7dbd8.js";import"./SwitchBase-5a35bd19.js";function z(t){return t===0?{label:"Clear Sky",emoji:"â˜€ï¸"}:t===1?{label:"Mainly Clear",emoji:"ðŸŒ¤ï¸"}:t===2?{label:"Partly Cloudy",emoji:"â›…"}:t===3?{label:"Overcast",emoji:"â˜ï¸"}:t===45||t===48?{label:"Foggy",emoji:"ðŸŒ«ï¸"}:t>=51&&t<=55?{label:"Drizzle",emoji:"ðŸŒ¦ï¸"}:t>=56&&t<=57?{label:"Freezing Drizzle",emoji:"ðŸŒ§ï¸"}:t>=61&&t<=65?{label:"Rain",emoji:"ðŸŒ§ï¸"}:t>=66&&t<=67?{label:"Freezing Rain",emoji:"ðŸŒ¨ï¸"}:t>=71&&t<=77?{label:"Snow",emoji:"â„ï¸"}:t>=80&&t<=82?{label:"Rain Showers",emoji:"ðŸŒ§ï¸"}:t>=85&&t<=86?{label:"Snow Showers",emoji:"ðŸŒ¨ï¸"}:t===95?{label:"Thunderstorm",emoji:"â›ˆï¸"}:t>=96?{label:"Thunderstorm + Hail",emoji:"â›ˆï¸"}:{label:"Mixed",emoji:"ðŸŒ¡ï¸"}}const $=new k({}.REACT_APP_API_BASE_URL),B="weather_zip";function L(t){const o=new Date(t);return Number.isNaN(o.getTime())?t:o.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function m(t){if(!t)return"N/A";const o=new Date(t);return Number.isNaN(o.getTime())?t:o.toLocaleString()}function J(){var d,b,f,g,E;const[t,o]=l.useState(W(B)||""),[s,c]=l.useState(!1),[u,y]=l.useState(""),[a,P]=l.useState(null),p=async r=>{if(r){c(!0),y("");try{const i=await $.getWeatherByZip(r);P(i),D(B,r)}catch(i){y((i==null?void 0:i.errorMessage)||"Unable to load weather for this ZIP code.")}finally{c(!1)}}};return l.useEffect(()=>{t&&p(t)},[]),e.createElement(e.Fragment,null,e.createElement(F,{style:{padding:16,marginBottom:16}},e.createElement(n,{variant:"h6",gutterBottom:!0},"Kentucky Weather by ZIP"),e.createElement(N,{style:{display:"flex",gap:8,flexWrap:"wrap"}},e.createElement(R,{variant:"outlined",size:"small",label:"ZIP Code",value:t,onChange:r=>o(r.target.value.replace(/[^0-9]/g,"").slice(0,5))}),e.createElement(j,{variant:"contained",color:"primary",onClick:()=>p(t),disabled:s},s?"Loading...":"Get Weather")),u&&e.createElement(n,{color:"error",variant:"body2",style:{marginTop:10}},u),a&&e.createElement(N,{style:{marginTop:14}},e.createElement(n,{variant:"body1",gutterBottom:!0},a.city,", ",a.state," (",a.zip,")"),e.createElement(n,{variant:"body2",gutterBottom:!0},((d=a.current)==null?void 0:d.weather_code)!=null?(()=>{const r=z(a.current.weather_code);return`${r.emoji} ${r.label} Â· `})():"",((b=a.current)==null?void 0:b.temperature_2m)??"N/A","Â°F Â· Wind ",((f=a.current)==null?void 0:f.wind_speed_10m)??"N/A"," mph"),e.createElement(n,{variant:"subtitle2",style:{marginTop:8}},"7-Day Forecast"),Array.isArray((g=a==null?void 0:a.daily)==null?void 0:g.time)&&a.daily.time.length>0?e.createElement(T,{container:!0,spacing:1,style:{marginTop:4,marginBottom:6}},a.daily.time.slice(0,7).map((r,i)=>{var h,v,w,S,_;return e.createElement(T,{item:!0,xs:12,sm:6,md:4,lg:3,key:`${r}-${i}`},e.createElement(x,{variant:"outlined"},e.createElement(C,{style:{padding:10}},e.createElement(n,{variant:"subtitle2"},L(r)),((h=a.daily.weather_code)==null?void 0:h[i])!=null&&(()=>{const A=z(a.daily.weather_code[i]);return e.createElement(n,{variant:"body2",style:{fontWeight:500}},A.emoji," ",A.label)})(),e.createElement(n,{variant:"body2",color:"textSecondary"},"High ",((v=a.daily.temperature_2m_max)==null?void 0:v[i])??"N/A","Â°F Â· Low ",((w=a.daily.temperature_2m_min)==null?void 0:w[i])??"N/A","Â°F"),((S=a.daily.precipitation_probability_max)==null?void 0:S[i])!=null&&e.createElement(n,{variant:"body2",color:"textSecondary"},"ðŸ’§ ",a.daily.precipitation_probability_max[i],"% chance of precip"),((_=a.daily.precipitation_sum)==null?void 0:_[i])!=null&&a.daily.precipitation_sum[i]>0&&e.createElement(n,{variant:"body2",color:"textSecondary"},"ðŸŒ‚ ",a.daily.precipitation_sum[i].toFixed(2),'" total'))))})):e.createElement(n,{variant:"body2"},"7-day forecast unavailable."),e.createElement(n,{variant:"subtitle2"},"Alerts"),((E=a.alerts)==null?void 0:E.length)>0?a.alerts.map((r,i)=>e.createElement(x,{key:`${r.title}-${i}`,variant:"outlined",style:{marginTop:8}},e.createElement(C,{style:{padding:12}},e.createElement(n,{variant:"subtitle2",gutterBottom:!0},r.title),e.createElement(n,{variant:"body2",color:"textSecondary"},"Event: ",r.event||"N/A"),e.createElement(n,{variant:"body2",color:"textSecondary"},"Severity: ",r.severity||"N/A"," â€¢ Urgency: ",r.urgency||"N/A"," â€¢ Certainty: ",r.certainty||"N/A"),e.createElement(n,{variant:"body2",color:"textSecondary"},"Areas: ",r.areaDesc||"N/A"),e.createElement(n,{variant:"body2",color:"textSecondary"},"Sent: ",m(r.sent)),e.createElement(n,{variant:"body2",color:"textSecondary"},"Effective: ",m(r.effective)),e.createElement(n,{variant:"body2",color:"textSecondary",gutterBottom:!0},"Expires: ",m(r.expires)),!!r.description&&e.createElement(n,{variant:"body2",style:{whiteSpace:"pre-line",marginBottom:6}},r.description),!!r.instruction&&e.createElement(n,{variant:"body2",style:{whiteSpace:"pre-line",marginBottom:6}},e.createElement("strong",null,"Instructions:")," ",r.instruction),!!r.senderName&&e.createElement(n,{variant:"caption",display:"block",color:"textSecondary"},"Issued by: ",r.senderName),!!r.web&&e.createElement(j,{size:"small",color:"primary",href:r.web,target:"_blank",rel:"noopener noreferrer",style:{marginTop:8}},"Alert details")))):e.createElement(n,{variant:"body2"},"No active alerts for this ZIP."))),e.createElement(I,{category:"weather",title:"Kentucky Weather",filterPosts:r=>{const i=`${r.title||""} ${r.shortDesc||""}`.toLowerCase();return/weather|storm|tornado|flood|snow|rain|ice\s|wind|temperature|forecast|freez|cold snap|heat wave|thunder|lightning|blizzard|hail|drought|hurricane|tropical storm|winter advisory|winter watch|severe|nws\b|national weather/i.test(i)}}))}export{J as default};
